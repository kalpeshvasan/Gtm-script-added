<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <title>Hello, world!</title>
</head>

<body>
  <div class="p-5">
    <h3 class="text-center mt-4 text-uppercase font-size-16 mb-4">My Friends</h3>
    <input type="text" id="search-names" placeholder=" Search By Names..." class="w-100 mx-8 mb-2 p-2">
    <button type="button" id="insert" class="text-center m-auto btn d-flex bg-success text-white mb-5 ">Search</button>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Name</th>
          <th scope="col">Degree</th>
          <th scope="col">Profession</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
  </div>
  </div>

  <!-- Optional JavaScript; choose one of the two! -->

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script>
    $(document).ready(function () {
      // Landing page
      let landingPageId = $("form #Campaign");
      if (!window?.location?.href?.includes("success=true")) {
        if (landingPageId.length > 0) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener LP",
          });
        }
      }
      // End Landing page

      // Step 5 and 6
      $(".next-btn").click(function () {
        let first = $("#first-question");
        let second = $("#second-question");
        let third = $("#third-question");
        let fourth = $("#fourth-question");
        let fifth = $("#fifth-question");
        let sixth = $("#sixth-question");
        let resultScreen = $("#result-screen");

        removeObjectFromDataLayer("Screener LP");

        if (first && !first?.hasClass("hidden-section")) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 1",
          });
        } else if (second && !second?.hasClass("hidden-section")) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 2",
          });
        } else if (third && !third?.hasClass("hidden-section")) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 3",
          });
        } else if (fourth && !fourth?.hasClass("hidden-section")) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 4",
          });
        } else if (fifth && !fifth?.hasClass("hidden-section")) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 5",
          });
        } else if (
          sixth &&
          !sixth?.hasClass("hidden-section") &&
          sixth.length > 0
        ) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 6",
          });
        }
      });

      $(".submit-btn").click(function () {
        let mailCompletion = $("#mail-screen");
        let formArea = $(".form-area");
        let emailInput = formArea.find("[type=email]").val();
        let checkInput = formArea
          .find("#Terms_and_Conditions-temp").val();
        let t = $("#email-address-temp");
        let e = t.val();
        let s = e.substring(0, e.indexOf("@"));
        let i = e.includes("@") ? e.substring(e.indexOf("@") + 1, e.length) : "";
        let r = i.substring(0, i.indexOf("."));
        let n = i.includes(".") ? i.substring(i.indexOf(".") + 1, i.length) : "";
        let emailCheck = e.includes("@") && i.includes(".") && s.length >= 2 && r.length >= 2 && n.length >= 2;

        if (emailInput !== "" && emailCheck && checkInput) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerEmailCompletion",
            step: "screenerEmailCompletion",
          });
          console.log(dataLayer)
        }
      });
      // End step 5 and 6

      // Quiz 3 steps
      let firstQuiz = $(".pet-cat #section1");
      let secondQuiz = $(".pet-cat #section2");
      let thirdQuiz = $(".pet-cat #section3");

      $("#section1-next").click(function () {
        if (
          $("#section1-next").hasClass("gray-btn") ||
          (this.hasAttribute("data-component") &&
            $("#section1-next").attr("data-component") === "start-cta")
        ) {
          removeObjectFromDataLayer("Screener LP");
          firstQuiz.hide(), secondQuiz.show();

          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 1",
          });
        }
      });

      $("#section3-next").click(function () {
        if ($("#section3-next").hasClass("gray-btn")) {
          removeObjectFromDataLayer("Screener LP");
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 1",
          });
        }
      });

      let formData = $(".data-overlay");
      let emailInput2 = formData.find("[name=Email_Address]").val();
      let t = $("#Email_Address");
      let e = t.val();
      let s = e.substring(0, e.indexOf("@"));
      let i = e.includes("@") ? e.substring(e.indexOf("@") + 1, e.length) : "";
      let r = i.substring(0, i.indexOf("."));
      let n = i.includes(".") ? i.substring(i.indexOf(".") + 1, i.length) : "";
      let emailCheck2 = e.includes("@") && i.includes(".") && s.length >= 2 && r.length >= 2 && n.length >= 2;

      if (emailInput2 !== "" && emailCheck2) {
        dataLayer = dataLayer || [];
        dataLayer.push({
          event: "screenerEmailCompletion",
          step: "screenerEmailCompletion",
        });
        console.log(dataLayer)
      }

      // Quiz 5 steps
      let secondSectionQuiz = $(".section #section2");
      let midSectionOneQuiz = $(".section #section-mid-1");
      let midSectionTwoQuiz = $(".section #section-mid-2");
      let thirdSectionQuiz = $(".section #section3");
      let fourthSectionQuiz = $(".section #section4");

      if (secondSectionQuiz) {
        if (secondSectionQuiz && secondSectionQuiz.css("display") == "") {
          removeObjectFromDataLayer("Screener LP");
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 1",
          });
        }
      }

      $("#section2-next").click(function () {
        if ($("#section2-next").hasClass("dark-green")) {
          removeObjectFromDataLayer("Screener LP");
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 2",
          });
        }
      });

      $(".section-mid-1-button").click(function () {
        removeObjectFromDataLayer("Screener LP");
        dataLayer = dataLayer || [];
        dataLayer.push({
          event: "screenerStepChange",
          step: "Screener page 3",
        });
      });

      $(".section-mid-2-button").click(function () {
        removeObjectFromDataLayer("Screener LP");
        dataLayer = dataLayer || [];
        dataLayer.push({
          event: "screenerStepChange",
          step: "Screener page 4",
        });
      });

      $("#section3-next").click(function () {
        if ($("#section3-next").hasClass("dark-green")) {
          removeObjectFromDataLayer("Screener LP");
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerStepChange",
            step: "Screener page 5",
          });
        }
      });

      $("#section4-next").click(function () {
        let formArea = $(".questionnaire-container");
        let emailInput = formArea.find("[type=email]").val();
        let checkSpan = formArea
          .find(".Terms_and_Conditions_check")
          .hasClass("yes");
        let err4 = $(".error-message4");
        let err5 = $(".error-message5");

        if (
          emailInput !== "" &&
          checkSpan &&
          err4.css("display") == "none" &&
          err5.css("display") == "none"
        ) {
          dataLayer = dataLayer || [];
          dataLayer.push({
            event: "screenerEmailCompletion",
            step: "screenerEmailCompletion",
          });
        }
      });

      // Screener Completion
      if (window?.location?.href?.includes("success=true")) {
        dataLayer = dataLayer || [];
        dataLayer.push({
          event: "screenerStepChange",
          step: "screenerCompletion",
        });
      }
      // End Screener Completion

      const removeObjectFromDataLayer = (str) => {
        for (let i = 0; i < dataLayer.length; i++) {
          if ("step" in dataLayer[i] && dataLayer[i]?.step === str) {
            dataLayer.splice(i, 1);
          }
        }
      };
    });
  </script>
  <!-- Option 2: Separate Popper and Bootstrap JS -->
  <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
</body>

</html>